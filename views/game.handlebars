<canvas id='graph'></canvas>
<script>
// TODO: refactor this ugly inline script
$(function() {
  setTimeout(function(){ location.reload(); }, 10000);

  w = $(window).innerWidth();
  h = $(window).innerHeight();

  $('#graph')[0].width = w;
  $('#graph')[0].height = h;

  console.log(w);

  words = {{{json words}}}

  words = words.map(function(elem) {
    return [elem.text, elem.size*2]
  });

  words.sort(function(a, b) { return (b[1] - a[1]) });

  // words = words.concat(words)

  WordCloud(document.getElementById('graph'), { 
    list: words,
    minRotation: -0.3,
    maxRotation: 0.3,
    rotateRatio: 0.3,
    shuffle: true
    // shape: 'square'
    } );

  // console.log ('starting');
  // wordcloud.start();
});
</script> 
